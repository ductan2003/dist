"use strict";(self["webpackChunkweb_se"]=self["webpackChunkweb_se"]||[]).push([[598],{7598:function(a,e,t){t.r(e),t.d(e,{default:function(){return $}});var s=t(3396),o=t(7139),n=t(9242),l=t(29);const i=a=>((0,s.dD)("data-v-26bf8339"),a=a(),(0,s.Cn)(),a),r={class:"container"},c={class:"heading-page"},d={class:"heading-page-content"},u={class:"body"},h={class:"avatar"},g={key:0,src:l,alt:"ava"},m=["src"],p={class:"button"},f={class:"infoContainer"},v={class:"info"},w={class:"cardInfo"},_=i((()=>(0,s._)("p",null,"First name:",-1))),k={class:"box"},y={class:"cardInfo"},I=i((()=>(0,s._)("p",null,"Last name:",-1))),b={class:"box"},C={key:0,class:"cardInfo"},P=i((()=>(0,s._)("p",null,"Password:",-1))),N={class:"box"},U={key:1,class:"cardInfo"},x=i((()=>(0,s._)("p",null,"New Password:",-1))),B={class:"box"},q={key:2,class:"cardInfo"},D=i((()=>(0,s._)("p",null,"Confirm Password:",-1))),A={class:"box"},S={class:"button"};function Z(a,e,t,l,i,Z){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",c,[(0,s._)("p",d,"Welcome, "+(0,o.zw)(this.firstName),1)]),(0,s._)("div",u,[(0,s._)("div",h,[this.avatar?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("img",g)),this.avatar?((0,s.wg)(),(0,s.iD)("img",{key:1,src:"http://localhost:8019/admin/exams/file/"+this.avatar,alt:"ava"},null,8,m)):(0,s.kq)("",!0),(0,s._)("div",p,[(0,s._)("input",{onChange:e[0]||(e[0]=a=>Z.handleFileImg()),ref:"fileImg",type:"file",name:"file",id:"file"},null,544),(0,s._)("button",{type:"submit",onClick:e[1]||(e[1]=(...a)=>Z.handleButtonClick&&Z.handleButtonClick(...a))},"Change your avatar")])]),(0,s._)("div",f,[(0,s._)("div",v,[(0,s._)("div",w,[_,(0,s._)("div",k,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>i.firstName=a),type:"text"},null,512),[[n.nr,i.firstName]])])]),(0,s._)("div",y,[I,(0,s._)("div",b,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>i.lastName=a),type:"text"},null,512),[[n.nr,i.lastName]])])]),i.auth?((0,s.wg)(),(0,s.iD)("div",C,[P,(0,s._)("div",N,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>i.password=a),type:"text"},null,512),[[n.nr,i.password]])])])):(0,s.kq)("",!0),i.auth?((0,s.wg)(),(0,s.iD)("div",U,[x,(0,s._)("div",B,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>i.newPassword=a),type:"text"},null,512),[[n.nr,i.newPassword]])])])):(0,s.kq)("",!0),i.auth?((0,s.wg)(),(0,s.iD)("div",q,[D,(0,s._)("div",A,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>i.confirmPassword=a),type:"text"},null,512),[[n.nr,i.confirmPassword]])])])):(0,s.kq)("",!0)]),(0,s._)("div",S,[(0,s._)("button",{type:"button",class:"saveButton",onClick:e[7]||(e[7]=(...a)=>Z.saveUserInfo&&Z.saveUserInfo(...a))},"Save"),i.auth?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"changeButton",onClick:e[8]||(e[8]=(...a)=>Z.changePass&&Z.changePass(...a))},"Change Password")),i.auth?((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"changeButton",onClick:e[9]||(e[9]=(...a)=>Z.undoChangePass&&Z.undoChangePass(...a))},"Back")):(0,s.kq)("",!0)])])])])}var T=t(4161),V=t(672);T.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token");var O={data(){return{user:null,fileImg:null,firstName:"",lastName:"",password:"",newPassword:"",confirmPassword:"",auth:!1,avatar:null}},methods:{handleFileImg(){this.avatar=this.$refs.fileImg.files[0],this.changeAvatar()},handleButtonClick(){this.$refs.fileImg.click()},saveUserInfo(){},async getUser(){if(localStorage.getItem("token")){T.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token");const a=await T.Z.get("http://localhost:8019/api/auth/profile");this.user=a.data,console.log(this.user)}},async getUserInfo(){await this.getUser();const a=await T.Z.get("http://localhost:8019/account/"+this.user.username);this.firstName=a.data.firstName,this.lastName=a.data.lastName,this.avatar=a.data.profileImage,console.log(this.avatar)},changePass(){this.auth=!0},undoChangePass(){this.auth=!1},async changeAvatar(){console.log(this.avatar),await T.Z.put("http://localhost:8019/account/updateProfileImage/"+this.user.username,{image:this.avatar},{headers:{"Content-Type":"multipart/form-data; boundary=${data._boundary}"}}).then((a=>{console.log(a.data),window.location.reload()})).catch((a=>{console.log(a),V.Am.error("Saved failed",{position:V.Am.POSITION.BOTTOM_RIGHT}),a.response?(console.log(a.response.data),console.log(a.response.status),console.log(a.response.headers)):a.request?console.log(a.request):console.log("Error",a.message)}))}},created(){this.getUserInfo()}},z=t(89);const F=(0,z.Z)(O,[["render",Z],["__scopeId","data-v-26bf8339"]]);var $=F}}]);
//# sourceMappingURL=598.3ce6b2de.js.map